## 面向对象设计与构造预习作业2-2

### 第一部分：训练目标

建立一个对象的集合，实现向集合中增加对象和访问集合中对象的操作，学习容器的使用和选择，熟悉对容器的操作。

----

### 第二部分：预备知识

#### 容器

既然我们拥有了装满药水的瓶子对象，那么自然也要拥有能够持有与使用它的人，这就是我们的冒险者。然而冒险者从来都得准备充分：在怪物面前若只有一瓶恢复药水，难免会疲于招架。因此冒险者可能会携带多个瓶子。那么，应当如何管理这些瓶子对象呢？

能够想到，数组可以完成这样的管理。不过在 Java 中，我们有更强大的“数组”——**容器**，它提供了更多管理多个对象的方法。以 `ArrayList` 为例，一个冒险者身上的瓶子可以以如下方式管理：

```java
public class MainClass {
	public static void main(String[] args) {
		// 以 ArrayList 为例，展示容器的用法

		// 1. 创建容器。大部分容器都会随着元素的加入自动扩容。
		ArrayList<Bottle> bottles = new ArrayList<>();

		// 2. 加入一个元素
		Bottle bottle = new Bottle();
		bottles.add(bottle);

		// 3. 判断元素是否在容器内
		if (bottles.contains(bottle)) {
			System.out.println("We have such a bottle!");
		}

		// 4. 遍历容器中的所有元素
		for (Bottle item : bottles) {
			System.out.println(item.getName());
		}

		// 5. 输出容器规模
		System.out.println(bottles.size());

		// 6. 删除一个元素
		bottles.remove(bottle);
	}
}
```

和数组相比，容器具有如下好处：

- 可以动态控制容量
- 可以方便地增加或删除元素
- 可以方便地对元素进行进一步的管理（以 `ArrayList` 为例，更多操作可以参考 [Java ArrayList - 菜鸟教程](https://www.runoob.com/java/java-arraylist.html)）

对于经常需要使用或添加药水瓶子的冒险者来说，使用容器是不二之选。注意到冒险者和瓶子同样是对象，并拥有一个 ID 与名字，因此我们可以将冒险者也封装为一个类：

```java
class Adventurer {
	private int id;
	private String name;
	private ArrayList<Bottle> bottles;
}
```

除了 `ArrayList` 外，还有 `HashMap`、`TreeMap`、`HashSet`、`TreeSet`等常用容器。

----

### 第三部分：基本要求

- 建立冒险者类，且符合封装的要求
- 使用适当的容器管理多个冒险者实例

----

### 第四部分：题目描述

在这个问题中，你需要管理多个冒险者。初始时，你没有需要管理的冒险者。接下来会有 $m$ 个操作：

1. 加入一个需要管理的冒险者
2. 给某个冒险者增加一个瓶子
3. 删除某个冒险者的一个瓶子
4. 查询某个冒险者所持有瓶子的价格之和
5. 查询某个冒险者所持有瓶子价格的最大值

你需要对操作 4、5 进行回答。

----

### 第五部分：输入/输出格式

第一行一个整数 $m$，表示操作的个数。

接下来的 $m$ 行，每行一个形如 `{type} {attribute}` 的操作，操作输入形式及其含义如下：

| type |                   attribute                   |                             意义                             | 输出文本                       |
| :--: | :-------------------------------------------: | :----------------------------------------------------------: | ------------------------------ |
|  1   |               `{adv_id} {name}`               | 加入一个 ID 为 `{adv_id}`、名字为 `{name}` 的冒险者，且未持有任何瓶子 | 无                             |
|  2   | `{adv_id} {bot_id} {name} {price} {capacity}` | 给 ID 为 `{adv_id}` 的冒险者增加一个瓶子，瓶子的 ID、名字、价格、容量分别为 `{bot_id}`、`{name}`、`{price}`、`{capacity}`，**且默认为已装满** | 无                             |
|  3   |              `{adv_id} {bot_id}`              |  将 ID 为 `{adv_id}` 的冒险者的 id 为 `{bot_id}` 的瓶子删除  | 无                             |
|  4   |                  `{adv_id}`                   |      查询 ID 为 `{adv_id}` 的冒险者所持有瓶子的价格之和      | 一个整数，表示瓶子价格之和     |
|  5   |                  `{adv_id}`                   |     查询 ID 为 `{adv_id}` 的冒险者所持有瓶子价格的最大值     | 一个整数，表示瓶子价格的最大值 |

#### 一、数据范围与操作限制

##### 变量约束

| 变量                | 类型   | 说明                     |
| ------------------- | ------ | ------------------------ |
| id (adv_id, bot_id) | 整数   | 取值范围：0 - 2147483647 |
| name                | 字符串 | 保证不会出现空白字符     |
| price               | 长整数 | 在 long 精度范围内       |
| capacity            | 浮点数 | 在 double 精度范围内     |

##### 操作约束

* 操作数满足 $1 \leq m \leq 2000$​。
* 保证所有冒险者与瓶子的 ID 两两不同。
* 操作 1：不会加入与已有冒险者和瓶子 ID 相同 ID 的新冒险者。
* 操作 2：冒险者 ID 一定存在，且新瓶子的 ID 与当前所有冒险者和瓶子的 ID 均不相同。
* 操作 3：冒险者 ID 一定存在，且冒险者一定持有该 ID 的瓶子。
* 操作 4：冒险者 ID 一定存在，若冒险者不持有任何瓶子，则输出 0。
* 操作 5：冒险者 ID 一定存在，且冒险者一定持有至少一个瓶子。

#### 二、测评方法

输出数值时，你的输出数值需要和正确数值相等。

**假设你的输出值 $x_{out}$ 和正确数值 $x_{std}$ 之间的绝对或相对误差小于等于  $10 ^ {-5}$，则认为是相等的，即满足**

$$
\dfrac {|x_{std} - x_{out}|}{\max(1, |x_{std}|)} \leq 10^{-5}
$$

#### 三、输入样例

```
7
1 1 Person1
2 1 2 bottle1 10 5
2 1 3 bottle2 15 12
4 1
5 1
3 1 2
4 1
```

#### 四、输出样例

```
25
15
15
```

----

### 第六部分：提示

建立一个对象的集合，实现向集合中增加对象和访问集合中对象的操作，学习容器的使用和选择。

熟悉对容器的操作，题目中限制了所有对象（冒险者、瓶子）的 ID 不会相同，思考一下，哪种容器会更加适合本次任务？或者说哪些容器呢？

在本次作业中我们有求和操作，尽管我们将输入数据限制在 long 的范围内，但是在求和时可能会超出精度范围。请你查阅 Java 相关资料，来看看在 Java 中是如何解决超过普通数据类型数据范围的精度问题的。

Java 中有些特别的类用于处理大数运算，如 `BigInteger`，`BigDecimal`。

